<html>

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/ >
  <link rel="stylesheet" href="../lib/vizabi/build/dist/vizabi.css">
  <script src="../lib/d3.v3.min.js"></script>
  <script src="../lib/vizabi/build/dist/vizabi.js"></script>
</head>

<body onkeyup="parent.keyCode(event)">
  <div id='placeholder' style='position: absolute; top: 0; bottom: 0; left: 0; right: 0; height: 100%; width: 100%'></div>
  <script>
  var locationArray = window.location.href.split("/");
  var localUrl = locationArray.splice(0, locationArray.indexOf("slides")).join("/")+"/";
      
  Vizabi._globals.ext_resources = {
    host: localUrl,
    translationPath: localUrl + 'dictionaries/zaf/en.json',
    conceptpropsPath: localUrl + 'dictionaries/zaf/metadata.json',
  };

  var viz = Vizabi('AgePyramid', document.getElementById('placeholder'), {
    state: {
      time: {
        start: "1996",
        value: "1996",
        end: "2016"
      },
            entities_side: null,
      entities_age: {
         grouping: 1
      },
      marker: {
        color: {
          use: "constant"
        },
         side: {
           use: "property",
           which: "gender"
         },
         label_name: {
           use: "property",
           which: "gender"
         },
         axis_x: {
            which: "population"
         }
      },
      entities_stack: {
        select: [
        {"educational_attainment_4_groups": "null","age": "0","gender": "null"}, 
        {"educational_attainment_4_groups": "null","age": "5","gender": "null"}, 
        {"educational_attainment_4_groups": "null","age": "10","gender": "null"}, 
        {"educational_attainment_4_groups": "null","age": "15","gender": "null"}, 
        {"educational_attainment_4_groups": "null","age": "20","gender": "null"}, 
        {"educational_attainment_4_groups": "null","age": "25","gender": "null"}, 
        {"educational_attainment_4_groups": "null","age": "30","gender": "null"},
        {"educational_attainment_4_groups": "null","age": "0","gender": "Male"}, 
        {"educational_attainment_4_groups": "null","age": "5","gender": "Male"}, 
        {"educational_attainment_4_groups": "null","age": "10","gender": "Male"}, 
        {"educational_attainment_4_groups": "null","age": "15","gender": "Male"}, 
        {"educational_attainment_4_groups": "null","age": "20","gender": "Male"}, 
        {"educational_attainment_4_groups": "null","age": "25","gender": "Male"}, 
        {"educational_attainment_4_groups": "null","age": "30","gender": "Male"}
        ]
      }
    },
    data: {
      reader: "csv",
      path: "../data/ddf--datapoints--population--by--year--gender--age_by_1_year.csv",
      splash: false
    },
    ui: {
      chart: {
        //lockNonSelected: 1996
      },
      presentation: false,
      buttons: [],
      dialogs: {
        'popup': [],
        'sidebar': [],
        'moreoptions': []
      }
    }
  });
  viz.model.state.time._defaults.end = "2016";
  </script>
</body>

</html>