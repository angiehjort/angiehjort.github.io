<html>

<head>
  <link rel="stylesheet" href="../../lib/vizabi/build/dist/vizabi.css">
  <script src="../lib/d3.v3.min.js"></script>
  <script src="../lib/vizabi/build/dist/vizabi.js"></script>
</head>

<body onkeyup="parent.keyCode(event)">
  <div id='placeholder' style='position: absolute; top: 0; bottom: 0; left: 0; right: 0; height: 100%; width: 100%'></div>
  <script>

  var locationArray = window.location.href.split("/");
  var localUrl = locationArray.splice(0, locationArray.indexOf("slides")).join("/")+"/";
      
  Vizabi._globals.ext_resources = {
      host: localUrl,
      translationPath: localUrl + 'dictionaries/en.json',
      conceptpropsPath: localUrl + 'dictionaries/metadata.json'
    };    
    
  Vizabi('BubbleChart', document.getElementById('placeholder'), {
    state: {
      time: {
        start: "1953",
        value: "1953"
      },
      entities: {
        select: [{
          "geo": "zaf",
          "trailStartTime": "1953",
          "firstAvailableSegment": "1953-01-01T00:00:00.000Z"
        }],
        show: {
          _defs_: {
            "geo": ["*"]
          }
        }
      },
      marker: {
        axis_y: {
          which: "child_mortality_0_5_year_olds_dying_per_1000_born",
          scaleType: "log"
        },
        axis_x: {
          which: "income_per_person_gdppercapita_ppp_inflation_adjusted",
          scaleType: "linear",
          zoomedMin: 1,
          zoomedMax: 13000
        },
        size: {
          which: "population_total",
          scaleType: "linear",
        },
        color: {
          use: "indicator",
          scaleType: "linear",
          which: "children_per_woman_total_fertility"
        }
      }
    },
    data: {
      reader: "csv",
      path: "../datapoints/african-countries.csv",
      splash: false
    },
    ui: {
      presentation: false,
      buttons: ['colors', 'find', 'size', 'trails', 'lock', 'moreoptions'],
      dialogs: {
        'popup': ['colors', 'find', 'size', 'zoom', 'moreoptions'], 
        'sidebar': ['colors', 'find', 'size'], 
        'moreoptions': ['opacity', 'speed', 'axes', 'size', 'colors', 'label', 'zoom', 'about']
      }
    }
  });
  </script>
</body>

</html>