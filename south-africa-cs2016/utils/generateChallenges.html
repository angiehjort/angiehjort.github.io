<script>

var muns = [261,262,263,264,265,266,267,268,269,270,271,272,273,274,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,260,299,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,477,478,479,499,760,761,762,763,764,765,766,797,798,799,503,504,505,506,560,561,562,563,564,565,566,567,568,514,569,570,571,573,582,583,584,585,586,538,542,587,588,589,590,594,595,596,597,598,574,575,576,577,524,525,526,529,578,579,580,581,546,591,592,593,599,960,961,962,963,964,965,966,967,968,969,970,973,974,976,977,978,979,980,981,982,983,984,985,986,987,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,360,361,362,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,199];

var result = [];

for (var i = 0; i<muns.length; i++) {
	var mun = muns[i];
	var challenge = getRandom(21);
	var ranks = getRandom(21);
	for (var j = 0; j<challenge.length; j++) {
		result.push([mun, challenge[j], ranks[j]]);
	}
}
window.onload = function() {
document.getElementById('click').addEventListener('click', function() {
		var encodedUri = encodeURI(getCsv(result));
		window.open(encodedUri);
});
}

function getCsv(data) {
	var lineArray = [];
	data.forEach(function (infoArray, index) {
	    var line = infoArray.join(",");
    lineArray.push(index == 0 ? "data:text/csv;charset=utf-8," + line : line);
	});
	return lineArray.join("\n");
}

function getRandom(n) {
	var result = [];
	for (var i=1;i<=n;i++) {
		result.push(i);
	}
	return shuffle(result);
}

function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

</script>
<button id="click">click</button>