<!doctype html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Vizabi Testing</title>
  <script src="https://d3js.org/d3.v4.js"></script>
  <link href="style.css" rel="stylesheet" type="text/css" >
  <link href="libs/vizabi.css" rel="stylesheet" type="text/css" >
  <link href="libs/bubblechart.css" rel="stylesheet" type="text/css">
  <script src="libs/vizabi.js"></script>
  <script src="libs/bubblechart.js"></script>
  <script src="libs/vizabi-ddfcsv-reader.js"></script>
  <script src="libs/vizabi-ws-reader.js"></script>
</head>

<body>
  <p id="instructions">Y = develop, X = stage. If bubbles are on the diagonal y=x, that means no change. Shortcuts: [ and ]</p>
  
  <select id="concepts_selector" onchange="update_chart();">
    <option value="" selected="selected">--- pick an indicator to compare ---</option>
    
    <option value="agricultural_land_percent_of_land_area">agricultural_land_percent_of_land_area</option>
    <option value="births_attended_by_skilled_health_staff_percent_of_total">births_attended_by_skilled_health_staff_percent_of_total</option>
    <option value="broadband_subscribers">broadband_subscribers</option>
    <option value="broadband_subscribers_per_100_people">broadband_subscribers_per_100_people</option>
    <option value="cell_phones_per_100_people">cell_phones_per_100_people</option>
    <option value="cell_phones_total">cell_phones_total</option>
    <option value="children_and_elderly_per_100_adults">children_and_elderly_per_100_adults</option>
    <option value="contraceptive_use_percent_of_women_ages_15_49">contraceptive_use_percent_of_women_ages_15_49</option>
    <option value="crude_birth_rate_births_per_1000_population">crude_birth_rate_births_per_1000_population</option>
    <option value="crude_death_rate_deaths_per_1000_population">crude_death_rate_deaths_per_1000_population</option>
    <option value="female_population_with_projections">female_population_with_projections</option>
    <option value="forest_area_sq_km">forest_area_sq_km</option>
    <option value="gdppercapita_growth_percent_per_year">gdppercapita_growth_percent_per_year</option>
    <option value="gnipercapita_atlasmethod_current_us">gnipercapita_atlasmethod_current_us</option>
    <option value="improved_sanitation_overall_access_percent">improved_sanitation_overall_access_percent</option>
    <option value="improved_sanitation_rural_access_percent">improved_sanitation_rural_access_percent</option>
    <option value="improved_sanitation_urban_access_percent">improved_sanitation_urban_access_percent</option>
    <option value="improved_water_source_overall_access_percent">improved_water_source_overall_access_percent</option>
    <option value="improved_water_source_rural_access_percent">improved_water_source_rural_access_percent</option>
    <option value="improved_water_source_urban_access_percent">improved_water_source_urban_access_percent</option>
    <option value="inflation_annual_percent">inflation_annual_percent</option>
    <option value="internet_users_per_100_people">internet_users_per_100_people</option>
    <option value="life_expectancy_female">life_expectancy_female</option>
    <option value="life_expectancy_male">life_expectancy_male</option>
    <option value="male_population_with_projections">male_population_with_projections</option>
    <option value="median_age_years">median_age_years</option>
    <option value="medical_doctors_per_1000_people">medical_doctors_per_1000_people</option>
    <option value="population_aged_0_4_years_both_sexes_percent">population_aged_0_4_years_both_sexes_percent</option>
    <option value="population_aged_0_4_years_female_percent">population_aged_0_4_years_female_percent</option>
    <option value="population_aged_0_4_years_male_percent">population_aged_0_4_years_male_percent</option>
    <option value="population_aged_0_4_years_total_number">population_aged_0_4_years_total_number</option>
    <option value="population_aged_10_14_years_both_sexes_percent">population_aged_10_14_years_both_sexes_percent</option>
    <option value="population_aged_10_14_years_female_percent">population_aged_10_14_years_female_percent</option>
    <option value="population_aged_10_14_years_male_percent">population_aged_10_14_years_male_percent</option>
    <option value="population_aged_10_14_years_total_number">population_aged_10_14_years_total_number</option>
    <option value="population_aged_15_19_years_both_sexes_percent">population_aged_15_19_years_both_sexes_percent</option>
    <option value="population_aged_15_19_years_female_percent">population_aged_15_19_years_female_percent</option>
    <option value="population_aged_15_19_years_male_percent">population_aged_15_19_years_male_percent</option>
    <option value="population_aged_15_19_years_total_number">population_aged_15_19_years_total_number</option>
    <option value="population_aged_20_39_years_both_sexes_percent">population_aged_20_39_years_both_sexes_percent</option>
    <option value="population_aged_20_39_years_female_percent">population_aged_20_39_years_female_percent</option>
    <option value="population_aged_20_39_years_male_percent">population_aged_20_39_years_male_percent</option>
    <option value="population_aged_20_39_years_total_number">population_aged_20_39_years_total_number</option>
    <option value="population_aged_40_59_years_both_sexes_percent">population_aged_40_59_years_both_sexes_percent</option>
    <option value="population_aged_40_59_years_female_percent">population_aged_40_59_years_female_percent</option>
    <option value="population_aged_40_59_years_male_percent">population_aged_40_59_years_male_percent</option>
    <option value="population_aged_40_59_years_total_number">population_aged_40_59_years_total_number</option>
    <option value="population_aged_5_9_years_both_sexes_percent">population_aged_5_9_years_both_sexes_percent</option>
    <option value="population_aged_5_9_years_female_percent">population_aged_5_9_years_female_percent</option>
    <option value="population_aged_5_9_years_male_percent">population_aged_5_9_years_male_percent</option>
    <option value="population_aged_5_9_years_total_number">population_aged_5_9_years_total_number</option>
    <option value="population_aged_60plus_years_both_sexes_percent">population_aged_60plus_years_both_sexes_percent</option>
    <option value="population_aged_60plus_years_female_percent">population_aged_60plus_years_female_percent</option>
    <option value="population_aged_60plus_years_male_percent">population_aged_60plus_years_male_percent</option>
    <option value="population_aged_60plus_years_total_number">population_aged_60plus_years_total_number</option>
    <option value="population_density_per_square_km">population_density_per_square_km</option>
    <option value="population_growth_annual_percent">population_growth_annual_percent</option>
    <option value="population_growth_annual_percent_with_projections">population_growth_annual_percent_with_projections</option>
    <option value="population_total">population_total</option>
    <option value="sex_ratio_0_14_years">sex_ratio_0_14_years</option>
    <option value="sex_ratio_15_24_years">sex_ratio_15_24_years</option>
    <option value="sex_ratio_15_49_years">sex_ratio_15_49_years</option>
    <option value="sex_ratio_above_50_years">sex_ratio_above_50_years</option>
    <option value="sex_ratio_all_age_groups">sex_ratio_all_age_groups</option>
    <option value="surface_area_sq_km">surface_area_sq_km</option>
    <option value="urban_population">urban_population</option>
    <option value="urban_population_growth_annual_percent">urban_population_growth_annual_percent</option>
    <option value="urban_population_percent_of_total">urban_population_percent_of_total</option>


  </select>
  <button id="prev_option" onclick="nextPrevOpt(-1);">PREVIOUS</button>
  <button id="next_option" onclick="nextPrevOpt(+1);">NEXT</button>
  <div id="placeholder"></div>
  <script src="script.js"></script>
  <script>
    var nextPrevOpt = function(direction) {
      var sel = document.getElementById('concepts_selector');
      var i = sel.selectedIndex + direction;
      if (i < 0) i = sel.options.length - 1;
      sel.options[i % sel.options.length].selected = true;
      update_chart();
    }

    window.onkeypress = function(e) {
      if (e.keyCode == 91) document.getElementById('prev_option').click();
      if (e.keyCode == 93) document.getElementById('next_option').click();
    }


    var update_chart = function() {
      var concept_name = document.getElementById('concepts_selector').value
      if(!concept_name) return;

      viz.model.state.marker.axis_x.setWhich({
        concept: concept_name,
        dataSource: "data"
      })
      viz.model.state.marker.axis_y.setWhich({
        concept: concept_name,
        dataSource: "data_alternative"
      })
    };
  </script>
</body>

</html>