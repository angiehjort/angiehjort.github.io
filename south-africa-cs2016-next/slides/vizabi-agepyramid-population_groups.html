<html>

<head>
  <link rel="stylesheet" href="../lib/vizabi/build/dist/vizabi.css">
  <script src="../lib/d3.v3.min.js"></script>
  <script src="../lib/vizabi/build/dist/vizabi.js"></script>
  <style>

  @font-face {
  font-family: 'geoslab703_md_bt_medium';
  src: url('../assets/fonts/geoslab703_md_bt_medium.woff2') format('woff2'),
       url('../assets/fonts/geoslab703_md_bt_medium.woff') format('woff'),
       url('../assets/fonts/geoslab703_md_bt_medium.ttf') format('truetype');
}
@font-face {
  font-family: 'geo703mi';
  src: url('../assets/fonts/geo703mi.woff2') format('woff2'),
       url('../assets/fonts/geo703mi.woff') format('woff'),
       url('../assets/fonts/geo703mi.ttf') format('truetype');
}
@font-face {
  font-family: 'cargts';
  src: url('../assets/fonts/cargts.woff2') format('woff2'),
       url('../assets/fonts/cargts.woff') format('woff'),
       url('../assets/fonts/cargts.ttf') format('truetype');
}
    body>div>span {
      font-family: 'geoslab703_md_bt_medium';
      font-size: 2.5vh;
      display: block;
      position: absolute;
      top: 30px;
      left: 50%;
      transform: translate(-40%,0);
      z-index: 10;
    }
  </style>
</head>

<body onkeyup="parent.keyCode(event)">
  <div style='position: absolute; bottom: 0;  right: 20%; height: 50%; width: 25%'>
    <span>White</span>
    <div id="placeholder_white"></div>
  </div>
  <div style='position: absolute; top: 0;  left: 20%; height: 50%; width: 25%'>
    <span>Black African</span>
    <div id="placeholder_black"></div>
  </div>
  <div  style='position: absolute; top: 0;  right: 20%; height: 50%; width: 25%'>
    <span>Coloured</span>
    <div id="placeholder_coloured"></div>
  </div>
  <div style='position: absolute; bottom: 0;  left: 20%; height: 50%; width: 25%'>
    <span>Indian and Asian</span>
    <div id="placeholder_indian"></div>
  </div>
  <script>
    
  var locationArray = window.location.href.split("/");
  var localUrl = locationArray.splice(0, locationArray.indexOf("slides")).join("/")+"/";
      
  Vizabi._globals.ext_resources = {
    host: localUrl,
    translationPath: localUrl + 'dictionaries/zaf/en.json',
    conceptpropsPath: localUrl + 'dictionaries/zaf/metadata.json',
  };

  var ap_black = {
    state: {
      time: {
        dim: "time"
      },
      entities_stack: null,
      entities_side: {
        dim: "gender"
      },
       marker: {
         space: ["entities", "entities_side", "entities_age", "time"],
         label: {
           use: "indicator",
           which: "age"
         },
         label_name: {
           use: "constant",
           which: ""
         },
         axis_y: {
           use: "indicator",
           which: "age",
           // domain Max should be set manually as age max from entites_age plus one grouping value (95 + 5 = 100)
           // that way the last age group fits in on the scale
           domainMax: 100,
           domainMin: 0
         },
         color: {
           use: "constant",
           which: "#FF0000"
         },
         side: {
           use: "property",
           which: "gender"
         },
          axis_x: {
            use: "indicator",
            which: "black",
            domainMin: 0,
            domainMax: 1400000000
          }
       },
       marker_minimap:{
         space: ["entities_stack"],
           type: "geometry",
           shape: "svg",
           label: {
             use: "property",
             which: "stack"
           },
           geoshape: {
             use: "property",
             which: "shape_lores_svg"
           }
       }
    },
    data: {
      reader: "csv",
      path: "../data/ddf--datapoints--black--coloured--indian--white--by--geo--year--gender--age.csv",
      splash: false
    },
    ui: {
      chart: {
        //lockNonSelected: 1996
      },
      presentation: false,
      buttons: [],
      dialogs: {
        'popup': [], 
        'sidebar': [], 
        'moreoptions': []
      }
    }
  };
    
  var ap_coloured = {
    state: {
      time: {
        dim: "time"
      },
      entities_stack: null,
      entities_side: {
        dim: "gender"
      },
       marker: {
         space: ["entities", "entities_side", "entities_age", "time"],
         label: {
           use: "indicator",
           which: "age"
         },
         label_name: {
           use: "property",
           which: ""
         },
         axis_y: {
           use: "indicator",
           which: "age",
           // domain Max should be set manually as age max from entites_age plus one grouping value (95 + 5 = 100)
           // that way the last age group fits in on the scale
           domainMax: 100,
           domainMin: 0
         },
         color: {
           use: "constant",
           which: "#FF0000"
         },
         side: {
           use: "property",
           which: "gender"
         },
          axis_x: {
            use: "indicator",
            which: "coloured",
            domainMin: 0,
            domainMax: 1400000000
          }
       },
       marker_minimap:{
         space: ["entities_stack"],
           type: "geometry",
           shape: "svg",
           label: {
             use: "property",
             which: "stack"
           },
           geoshape: {
             use: "property",
             which: "shape_lores_svg"
           }
       }
    },
    data: {
      reader: "csv",
      path: "../data/ddf--datapoints--black--coloured--indian--white--by--geo--year--gender--age.csv",
      splash: false
    },
    ui: {
      chart: {
        //lockNonSelected: 1996
      },
      presentation: false,
      buttons: [],
      dialogs: {
        'popup': [], 
        'sidebar': [], 
        'moreoptions': []
      }
    }
  };

  var ap_white = {
    state: {
      time: {
        dim: "time"
      },
      entities_stack: null,
      entities_side: {
        dim: "gender"
      },
       marker: {
         space: ["entities", "entities_side", "entities_age", "time"],
         label: {
           use: "indicator",
           which: "age"
         },
         label_name: {
           use: "property",
           which: ""
         },
         axis_y: {
           use: "indicator",
           which: "age",
           // domain Max should be set manually as age max from entites_age plus one grouping value (95 + 5 = 100)
           // that way the last age group fits in on the scale
           domainMax: 100,
           domainMin: 0
         },
         color: {
           use: "constant",
           which: "#FF0000"
         },
         side: {
           use: "property",
           which: "gender"
         },
          axis_x: {
            use: "indicator",
            which: "white",
            domainMin: 0,
            domainMax: 1400000000
          }
       },
       marker_minimap:{
         space: ["entities_stack"],
           type: "geometry",
           shape: "svg",
           label: {
             use: "property",
             which: "stack"
           },
           geoshape: {
             use: "property",
             which: "shape_lores_svg"
           }
       }
    },
    data: {
      reader: "csv",
      path: "../data/ddf--datapoints--black--coloured--indian--white--by--geo--year--gender--age.csv",
      splash: false
    },
    ui: {
      chart: {
        //lockNonSelected: 1996
      },
      presentation: false,
      buttons: [],
      dialogs: {
        'popup': [], 
        'sidebar': [], 
        'moreoptions': []
      }
    }
  };

  var ap_indian = {
    state: {
      time: {
        dim: "time"
      },
      entities_stack: null,
      entities_side: {
        dim: "gender"
      },
       marker: {
         space: ["entities", "entities_side", "entities_age", "time"],
         label: {
           use: "indicator",
           which: "age"
         },
         label_name: {
           use: "property",
           which: ""
         },
         axis_y: {
           use: "indicator",
           which: "age",
           // domain Max should be set manually as age max from entites_age plus one grouping value (95 + 5 = 100)
           // that way the last age group fits in on the scale
           domainMax: 100,
           domainMin: 0
         },
         color: {
           use: "constant",
           which: "#FF0000"
         },
         side: {
           use: "property",
           which: "gender"
         },
          axis_x: {
            use: "indicator",
            which: "indian",
            domainMin: 0,
            domainMax: 1400000000
          }
       },
       marker_minimap:{
         space: ["entities_stack"],
           type: "geometry",
           shape: "svg",
           label: {
             use: "property",
             which: "stack"
           },
           geoshape: {
             use: "property",
             which: "shape_lores_svg"
           }
       }
    },
    data: {
      reader: "csv",
      path: "../data/ddf--datapoints--black--coloured--indian--white--by--geo--year--gender--age.csv",
      splash: false
    },
    ui: {
      chart: {
        //lockNonSelected: 1996
      },
      presentation: false,
      buttons: [],
      dialogs: {
        'popup': [], 
        'sidebar': [], 
        'moreoptions': []
      }
    }
  };

  Vizabi('AgePyramid', document.getElementById('placeholder_black'), ap_black);
  Vizabi('AgePyramid', document.getElementById('placeholder_coloured'), ap_coloured);
  Vizabi('AgePyramid', document.getElementById('placeholder_indian'), ap_indian);
  Vizabi('AgePyramid', document.getElementById('placeholder_white'), ap_white);

  d3.selectAll(".vzb-tool").classed("vzb-timeslider-off",true);
  </script>
</body>

</html>